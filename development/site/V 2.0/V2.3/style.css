/* ==========================================================================
   Nemo V2.3 - Enhanced Ocean Theme
   Deep blue ocean aesthetic with glass morphism and underwater feel
   ========================================================================== */

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap'); /* Using Montserrat for a modern, clean look */

:root {
    --ink: #072b3a; /* Deep, dark blue for primary text and elements */
    --ink-rgb: 7, 43, 58;
    --accent: #ffb703; /* Vibrant gold/yellow accent */
    --accent-glow: #ffd23f; /* Lighter glow for accent */
    --accent-rgb: 255, 183, 3;

    --sea-0: #e8f7ff; /* Surface lightest blue */
    --sea-0-rgb: 232, 247, 255;
    --sea-1: #87ceeb; /* Mid-depth blue */
    --sea-1-rgb: 135, 206, 235;
    --sea-2: #0b3550; /* Deeper blue */
    --sea-2-rgb: 11, 53, 80;
    --deep: #001623; /* Deepest, darkest ocean */
    --deep-rgb: 0, 22, 35;

    --glass: rgba(255, 255, 255, 0.12); /* Base glass background */
    --glass-border: rgba(255, 255, 255, 0.25); /* Stronger glass border */
    --card-text-light: rgba(255, 255, 255, 0.9); /* Text color for cards */

    /* Caustics (light patterns on the ocean floor/surface) - More intricate */
    --caustics: radial-gradient(circle at 15% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 60%),
                radial-gradient(circle at 85% 75%, rgba(255, 255, 255, 0.08) 0%, transparent 60%),
                radial-gradient(circle at 40% 90%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 60% 10%, rgba(255, 255, 255, 0.04) 0%, transparent 40%);
    
    --radius: 16px;
    --radius-lg: 24px;
    --shadow: 0 12px 48px rgba(0, 0, 0, 0.4); /* Stronger base shadow */
    --shadow-glow: 0 0 60px rgba(var(--accent-rgb), 0.5); /* More prominent glow */
    
    --ease: cubic-bezier(0.22, 0.61, 0.36, 1); /* Water-like ease */
    --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --duration: 1.5s; /* Longer transition for cinematic feel */
    --fast-duration: 0.6s;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Montserrat', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--deep); /* Fallback */
    color: white;
    overflow: hidden; /* Hide scrollbars, manage content with JS */
    height: 100vh;
    cursor: none; /* Custom cursor */
    /* Immersive HD Ocean Background */
    background-image:
        /* Subtle, slow-moving large gradients */
        radial-gradient(ellipse at 10% 20%, rgba(var(--sea-0-rgb), 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 90% 80%, rgba(var(--sea-1-rgb), 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 30% 60%, rgba(var(--sea-2-rgb), 0.1) 0%, transparent 50%),
        /* Main depth gradient */
        linear-gradient(180deg, var(--sea-1) 0%, var(--sea-2) 50%, var(--deep) 100%);
    background-size: 200% 200%; /* Make background larger for animation */
    background-position: 0% 0%;
    animation: flow 120s linear infinite alternate; /* Very slow overall flow */
    transition: background-position var(--duration) var(--ease);
}

@keyframes flow {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}

/* Custom cursor */
.cursor {
    position: fixed;
    width: 28px; /* Slightly larger */
    height: 28px;
    border: 2px solid var(--accent);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transition: transform 0.15s ease-out, background 0.15s ease-out, opacity 0.3s ease-out; /* Smoother transition for opacity */
    box-shadow: 0 0 10px rgba(var(--accent-rgb), 0.3); /* Subtle glow */
    transform-origin: center center;
    opacity: 0; /* Initially hide cursor via CSS, JS will make it opaque on mousemove */
}

.cursor.hover {
    transform: scale(1.8); /* More noticeable scale */
    background: rgba(var(--accent-rgb), 0.15); /* Slightly stronger fill */
    border-color: var(--accent-glow);
    box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.6);
}

#ocean {
    width: 100vw;
    height: 100vh;
    position: relative;
    transition: transform var(--duration) var(--ease),
                filter var(--duration) var(--ease); /* Add filter transition */
    will-change: transform, filter;
    backface-visibility: hidden;
    transform-style: preserve-3d;
}

.panel {
    width: 100vw;
    height: 100vh;
    position: absolute;
    top: 0;
    left: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    transition: opacity var(--fast-duration) var(--ease); /* Fade content faster */
    will-change: transform, opacity;
    backface-visibility: hidden;
    padding: 2rem; /* Add some overall padding to the panel itself */
    box-sizing: border-box; /* Include padding in element's total width and height */
}

/* Depth-based backgrounds/filters applied to the #ocean container by JS */
/* The .depth-X classes below are for the *content cards* or specific elements within a panel, not the full panel background */

/* Animated caustics layer for panels */
.panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--caustics); /* Use the defined caustics variable */
    background-size: 200% 200%; /* Make background larger for animation */
    animation: caustics-drift 25s ease-in-out infinite alternate; /* Slower drift */
    pointer-events: none;
    opacity: 0.8; /* Subtle caustics */
    transition: opacity var(--duration) var(--ease); /* Allow opacity to fade with depth */
}

@keyframes caustics-drift {
    0% { background-position: 0% 0%; transform: translate(0, 0) rotate(0deg); }
    100% { background-position: 100% 100%; transform: translate(-30px, 15px) rotate(3deg); } /* Larger drift */
}

/* Cards and content */
.card {
    background: var(--glass);
    backdrop-filter: blur(25px); /* Stronger blur */
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    padding: 4rem 3.5rem; /* Slightly more generous padding */
    text-align: center;
    max-width: 650px; /* Increased max-width for more breathing room */
    margin: 2rem auto; /* Center the card if it's not max width */
    position: relative;
    overflow: hidden;
    transition: transform 0.4s var(--ease), box-shadow 0.4s var(--ease);
    animation: fadeIn 0.8s var(--ease) forwards;
    
    /* Flexbox for inner content arrangement */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.card:hover {
    transform: translateY(-10px) scale(1.03); /* More pronounced lift */
    box-shadow: var(--shadow), var(--shadow-glow); /* Glowing shadow */
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -120%; /* Start further left */
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent); /* Brighter shimmer */
    transition: left 0.8s var(--ease); /* Slower shimmer, use var(--ease) */
}

.card:hover::before {
    left: 120%; /* End further right */
}

.card h1, .card h2 {
    font-size: clamp(2rem, 5vw, 3rem); /* Bigger headings */
    font-weight: 700;
    margin-bottom: 1.5rem; /* Increase space below headings */
    background: linear-gradient(135deg, white 0%, var(--accent-glow) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1.2;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3); /* Subtle text shadow for depth */
}

/* Kicker style for the main hub description */
#hub-dropoff .card p:first-of-type {
    font-size: 1.3rem; /* More prominent */
    line-height: 1.5;
    color: var(--card-text-light);
    margin-bottom: 2.5rem; /* More space below the main paragraph */
    font-weight: 400;
}

.card p {
    font-size: 1.1rem;
    line-height: 1.6;
    color: var(--card-text-light); /* Consistent text color */
    margin-bottom: 1.5rem; /* Default margin below paragraphs in cards */
}

/* Div containing chips in the card */
.card > div { /* Target the div containing chips directly */
    margin-top: 1.5rem; /* Add margin above chips to separate from paragraph */
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem; /* Use gap for consistent spacing between chips */
}

.chip {
    display: inline-block;
    background: rgba(var(--accent-rgb), 0.25); /* Stronger accent background */
    color: var(--accent-glow);
    padding: 0.7rem 1.4rem; /* Slightly more padding for chips */
    border-radius: 25px;
    font-size: 1.05rem; /* Slightly larger text */
    font-weight: 600;
    margin: 0; /* Removed individual chip margin, use gap on parent div */
    border: 1px solid rgba(var(--accent-rgb), 0.4); /* Stronger border */
    transition: all 0.3s var(--ease);
    cursor: pointer;
    text-decoration: none;
    text-shadow: 0 0 8px rgba(var(--accent-rgb), 0.2); /* Subtle text glow */
}

.chip:hover {
    background: var(--accent);
    color: var(--ink); /* Dark text on bright chip */
    transform: scale(1.08) translateY(-2px); /* More dynamic lift and scale */
    box-shadow: 0 6px 25px rgba(var(--accent-rgb), 0.6); /* More pronounced shadow */
    border-color: var(--accent-glow);
}

/* Navigation elements */
.brand-home {
    position: fixed;
    bottom: 2.5rem; /* Slightly higher */
    left: 2.5rem; /* Slightly further in */
    z-index: 1000;
    color: var(--accent);
    font-weight: 700;
    font-size: 1.3rem; /* Larger brand text */
    text-decoration: none;
    transition: all 0.3s var(--ease);
    cursor: pointer;
    text-shadow: 0 0 15px rgba(var(--accent-rgb), 0.4);
}

.brand-home:hover {
    color: var(--accent-glow);
    transform: scale(1.15) translateY(-3px); /* More pronounced effect */
    text-shadow: 0 0 30px var(--accent-glow);
}

.compass-toggle {
    position: fixed;
    bottom: 2.5rem;
    right: 2.5rem;
    z-index: 1000;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    width: 65px; /* Larger toggle */
    height: 65px;
    color: var(--accent);
    font-size: 1.8rem; /* Larger icon */
    cursor: pointer;
    transition: all 0.3s var(--ease);
    box-shadow: var(--shadow);
    display: flex; /* Center icon */
    align-items: center;
    justify-content: center;
    line-height: 1; /* Fix line height for icon */
    transform-origin: center center;
    animation: pulse 2s infinite ease-in-out; /* Subtle pulse animation */
}

.compass-toggle:hover {
    background: rgba(var(--accent-rgb), 0.25);
    transform: scale(1.15) rotate(90deg); /* More dynamic rotation */
    box-shadow: var(--shadow-glow);
    animation: none; /* Stop pulse on hover */
}

.compass-toggle[aria-expanded="true"] {
     transform: scale(1.15) rotate(45deg); /* Show rotation when open */
     background: rgba(var(--accent-rgb), 0.3);
     box-shadow: var(--shadow-glow);
}

@keyframes pulse {
    0% { transform: scale(1); box-shadow: 0 0 10px rgba(var(--accent-rgb), 0.3); }
    50% { transform: scale(1.05); box-shadow: 0 0 25px rgba(var(--accent-rgb), 0.6); }
    100% { transform: scale(1); box-shadow: 0 0 10px rgba(var(--accent-rgb), 0.3); }
}

/* Compass modal */
.compass {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8); /* Start smaller */
    z-index: 2000;
    background: rgba(var(--deep-rgb), 0.98); /* Near opaque deep blue */
    backdrop-filter: blur(35px); /* Stronger blur */
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg); /* Squared shape for more content */
    width: 450px; /* Wider compass */
    height: auto; /* Auto height for content */
    padding: 3rem; /* More padding */
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s var(--ease), transform 0.4s var(--ease), visibility 0.4s;
    box-shadow: 0 0 120px rgba(0, 0, 0, 0.7); /* More dramatic shadow */
}

.compass.show {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

.compass-nav {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.2rem; /* More space */
    width: 100%; /* Fill compass width */
    max-width: 300px; /* Constrain width */
}

.compass-item {
    display: flex;
    flex-direction: column; /* Stack text */
    align-items: center;
    justify-content: center;
    background: var(--glass);
    border-radius: var(--radius);
    color: var(--card-text-light);
    text-decoration: none;
    font-size: 1rem; /* Slightly larger text */
    font-weight: 600;
    transition: all 0.3s var(--ease);
    text-align: center;
    line-height: 1.3;
    min-height: 70px; /* Ensure good tap target */
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.5rem; /* Add padding for content */
}

.compass-item:hover {
    background: var(--accent);
    color: var(--ink);
    transform: scale(1.08); /* More pronounced scale */
    box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.4);
    border-color: var(--accent);
}

.compass-item.center {
    background: var(--accent-glow); /* Brighter center hub */
    color: var(--ink);
    font-weight: 700;
    box-shadow: 0 0 25px rgba(var(--accent-rgb), 0.8);
}

/* Hub specific styling */
#hub-dropoff .card {
    background: linear-gradient(135deg, var(--glass) 0%, rgba(var(--accent-rgb), 0.15) 100%);
    border: 2px solid rgba(var(--accent-rgb), 0.4);
}

/* Content page positioning for immersive navigation elements */
#site-logo {
    position: fixed;
    top: 15vh;
    left: 15vw;
    z-index: 1000;
    color: var(--accent);
    font-weight: 700;
    font-size: 1.3rem;
    text-decoration: none;
    transition: all 0.3s var(--ease);
    cursor: pointer;
    text-shadow: 0 0 15px rgba(var(--accent-rgb), 0.4);
    background: var(--glass);
    backdrop-filter: blur(20px);
    padding: 1rem 1.5rem;
    border-radius: var(--radius);
    border: 1px solid var(--glass-border);
}

#site-logo:hover {
    color: var(--accent-glow);
    transform: scale(1.15) translateY(-3px);
    text-shadow: 0 0 30px var(--accent-glow);
}

#quick-nav-toggle {
    position: fixed;
    top: 15vh;
    right: 15vw;
    z-index: 1000;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    width: 50px;
    height: 50px;
    color: var(--accent);
    font-size: 1.4rem;
    cursor: pointer;
    transition: all 0.3s var(--ease);
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    transform-origin: center center;
}

#quick-nav-toggle:hover {
    background: rgba(var(--accent-rgb), 0.25);
    transform: scale(1.15) rotate(90deg);
    box-shadow: var(--shadow-glow);
}

#mute-toggle {
    position: fixed;
    top: calc(15vh + 70px);
    right: 15vw;
    z-index: 1000;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    color: var(--accent);
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s var(--ease);
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

#mute-toggle:hover {
    background: rgba(var(--accent-rgb), 0.25);
    transform: scale(1.15);
    box-shadow: var(--shadow-glow);
}

/* Content pages need padding for the fixed elements */
body {
    padding-top: 120px;
    padding-left: 20px;
    padding-right: 20px;
}

/* Responsive design */
@media (max-width: 768px) {
    body { font-size: 15px; } /* Adjust base font size for smaller screens */

    .card {
        padding: 3rem 2rem;
        margin: 1.5rem auto;
        max-width: 95vw;
    }

    .card h1, .card h2 {
        font-size: clamp(1.8rem, 7vw, 2.5rem);
        margin-bottom: 1rem;
    }

    #hub-dropoff .card p:first-of-type {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
    }

    .card p {
        font-size: 1rem;
        margin-bottom: 1rem;
    }
    .card > div {
        margin-top: 1rem;
        gap: 0.3rem; /* Reduce gap slightly on mobile */
    }
    .chip {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
    }

    .brand-home, .compass-toggle {
        bottom: 1.5rem;
    }

    .brand-home {
        left: 1.5rem;
        font-size: 1.1rem;
    }

    .compass-toggle {
        right: 1.5rem;
        width: 55px;
        height: 55px;
        font-size: 1.4rem;
    }

    .compass {
        width: 90vw;
        height: auto;
        padding: 2rem;
        border-radius: var(--radius);
    }

    .compass-nav {
        grid-template-columns: repeat(2, 1fr); /* 2 columns on mobile for better layout */
        gap: 0.8rem;
    }
    .compass-item {
        font-size: 0.85rem;
        min-height: 50px;
    }

    #site-logo {
        top: 10vh;
        left: 5vw;
        font-size: 1.1rem;
        padding: 0.8rem 1.2rem;
    }

    #quick-nav-toggle {
        top: 10vh;
        right: 5vw;
        width: 45px;
        height: 45px;
        font-size: 1.2rem;
    }

    #mute-toggle {
        top: calc(10vh + 55px);
        right: 5vw;
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .panel::before {
        animation: none;
    }
    body {
        animation: none;
    }
}

/* Loading animation */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Focus styles for accessibility */
.chip:focus, .compass-item:focus, .brand-home:focus, .compass-toggle:focus {
    outline: 3px solid var(--accent-glow); /* Brighter, thicker outline */
    outline-offset: 5px; /* More offset */
    border-radius: var(--radius); /* Rounded focus outline for chips/items */
}
/* Specific for compass toggle */
.compass-toggle:focus {
    border-radius: 50%; /* Keep round for button */
}

/* Depth transitions applied to the #ocean main element */
/* These filters will be dynamically applied to #ocean via JS based on depth */
[data-current-depth="0"] { /* Using a data attribute for JS to control */
    filter: brightness(1.1) contrast(1.05) saturate(1.05); /* Brighter, more vibrant surface */
}

[data-current-depth="1"] {
    filter: brightness(0.9) contrast(1.1) saturate(1.1) hue-rotate(-5deg); /* Slightly darker, higher contrast, subtle green/blue shift */
}

[data-current-depth="2"] {
    filter: brightness(0.7) contrast(1.2) saturate(0.9) hue-rotate(-10deg) blur(0.5px); /* Darker, high contrast, more blue/green shift, subtle blur for depth */
}
